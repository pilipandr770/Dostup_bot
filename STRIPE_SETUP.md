# Настройка платежей через Stripe

## Необходимые шаги

1. **Создайте аккаунт Stripe**:
   - Зарегистрируйтесь на [stripe.com](https://stripe.com)
   - Пройдите процесс верификации аккаунта

2. **Получите API ключи**:
   - Найдите секцию "Developers" -> "API keys"
   - Скопируйте Secret Key (начинается с `sk_`)
   - Добавьте его в файл .env как `STRIPE_API_KEY=sk_...`

3. **Создайте продукты и цены**:
   - В панели Stripe перейдите в "Products"
   - Создайте три продукта, соответствующих вашим тарифам:
     - Базовый курс
     - Премиум курс
     - VIP курс
   - Для каждого продукта создайте цену в EUR
   - Скопируйте ID цен (начинаются с `price_`) 
   - Обновите значения `stripe_price_id` в коде для каждого тарифа

4. **Настройте Webhook**:
   - В панели Stripe перейдите в "Developers" -> "Webhooks"
   - Добавьте endpoint с URL вашего сервера: `https://yourdomain.com/webhook/stripe`
   - Выберите событие `checkout.session.completed`
   - Скопируйте signing secret
   - Добавьте его в файл .env как `STRIPE_WEBHOOK_SECRET=whsec_...`

5. **Настройте URL для перенаправления**:
   - Добавьте в .env URL для перенаправления после успешной оплаты: 
     ```
     STRIPE_SUCCESS_URL=https://t.me/your_bot_username
     STRIPE_CANCEL_URL=https://t.me/your_bot_username
     ```

## Тестирование платежей

В тестовом режиме Stripe используйте следующие номера карт:
- Успешный платеж: `4242 4242 4242 4242`
- Отклоненный платеж: `4000 0000 0000 0002`

## Дополнительная настройка для продакшена

- Настройте SSL/TLS для вашего webhook-сервера
- Используйте обратный прокси (например, Nginx) для маршрутизации запросов
- Рассмотрите возможность использования serveo, ngrok или cloudflared для тестирования на локальном компьютере
